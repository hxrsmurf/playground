---
export function getStaticPaths() {
  return [
    {params: {year_month: '2023-10'}},
  ];
}

const { year_month } = Astro.params;

const response = await fetch('https://api.spotify-public.homelabwithkevin.com?year_month=' + year_month);
const data = await response.json();

---

<div>Date: {data.year_month}</div>
<table>
    <th>device</th>
    <th>count</th>
{data.top_devices.map((device)=> (
    <tr>
    <td>
        {device.device}
    </td>
    <td>
        {device.count}
    </td>
    </tr>
))}
</table>